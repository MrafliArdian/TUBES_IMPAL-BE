{
	"info": {
		"name": "Investment Calculator API - Complete Testing",
		"description": "Complete API testing collection for Investment Calculator with all features",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
	},
	"item": [
		{
			"name": "1. Authentication",
			"item": [
				{
					"name": "1.1 Register User",
					"request": {
						"method": "POST",
						"header": [{"key": "Content-Type", "value": "application/json"}],
						"url": {
							"raw": "{{base_url}}/api/auth/register/",
							"host": ["{{base_url}}"],
							"path": ["api", "auth", "register", ""]
						},
						"body": {
							"mode": "raw",
							"raw": "{\n  \"username\": \"testuser\",\n  \"email\": \"test@example.com\",\n  \"password\": \"TestPass123!\",\n  \"password2\": \"TestPass123!\",\n  \"full_name\": \"Test User\",\n  \"phone_number\": \"08123456789\"\n}"
						}
					}
				},
				{
					"name": "1.2 Login User",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"if (pm.response.code === 200) {",
									"    var jsonData = pm.response.json();",
									"    pm.environment.set(\"user_access_token\", jsonData.access);",
									"    pm.environment.set(\"user_refresh_token\", jsonData.refresh);",
									"    console.log(\"User token saved!\");",
									"}"
								]
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [{"key": "Content-Type", "value": "application/json"}],
						"url": {
							"raw": "{{base_url}}/api/auth/login/",
							"host": ["{{base_url}}"],
							"path": ["api", "auth", "login", ""]
						},
						"body": {
							"mode": "raw",
							"raw": "{\n  \"username\": \"testuser\",\n  \"password\": \"TestPass123!\"\n}"
						}
					}
				},
				{
					"name": "1.3 Login Admin",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"if (pm.response.code === 200) {",
									"    var jsonData = pm.response.json();",
									"    pm.environment.set(\"admin_access_token\", jsonData.access);",
									"    pm.environment.set(\"admin_refresh_token\", jsonData.refresh);",
									"    console.log(\"Admin token saved!\");",
									"}"
								]
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [{"key": "Content-Type", "value": "application/json"}],
						"url": {
							"raw": "{{base_url}}/api/auth/login/",
							"host": ["{{base_url}}"],
							"path": ["api", "auth", "login", ""]
						},
						"body": {
							"mode": "raw",
							"raw": "{\n  \"username\": \"admin\",\n  \"password\": \"AdminPass123!\"\n}"
						}
					}
				},
				{
					"name": "1.4 Get Current User Info",
					"request": {
						"method": "GET",
						"header": [{"key": "Authorization", "value": "Bearer {{user_access_token}}"}],
						"url": {
							"raw": "{{base_url}}/api/auth/me/",
							"host": ["{{base_url}}"],
							"path": ["api", "auth", "me", ""]
						}
					}
				},
				{
					"name": "1.5 Refresh Token",
					"request": {
						"method": "POST",
						"header": [{"key": "Content-Type", "value": "application/json"}],
						"url": {
							"raw": "{{base_url}}/api/auth/refresh/",
							"host": ["{{base_url}}"],
							"path": ["api", "auth", "refresh", ""]
						},
						"body": {
							"mode": "raw",
							"raw": "{\n  \"refresh\": \"{{user_refresh_token}}\"\n}"
						}
					}
				}
			]
		},
		{
			"name": "2. Profile Management",
			"item": [
				{
					"name": "2.1 View Profile",
					"request": {
						"method": "GET",
						"header": [{"key": "Authorization", "value": "Bearer {{user_access_token}}"}],
						"url": {
							"raw": "{{base_url}}/api/auth/profile/",
							"host": ["{{base_url}}"],
							"path": ["api", "auth", "profile", ""]
						}
					}
				},
				{
					"name": "2.2 Update Profile (PATCH)",
					"request": {
						"method": "PATCH",
						"header": [
							{"key": "Authorization", "value": "Bearer {{user_access_token}}"},
							{"key": "Content-Type", "value": "application/json"}
						],
						"url": {
							"raw": "{{base_url}}/api/auth/profile/",
							"host": ["{{base_url}}"],
							"path": ["api", "auth", "profile", ""]
						},
						"body": {
							"mode": "raw",
							"raw": "{\n  \"email\": \"updated@example.com\",\n  \"phone_number\": \"08111222333\"\n}"
						}
					}
				},
				{
					"name": "2.3 Change Password",
					"request": {
						"method": "POST",
						"header": [
							{"key": "Authorization", "value": "Bearer {{user_access_token}}"},
							{"key": "Content-Type", "value": "application/json"}
						],
						"url": {
							"raw": "{{base_url}}/api/auth/change-password/",
							"host": ["{{base_url}}"],
							"path": ["api", "auth", "change-password", ""]
						},
						"body": {
							"mode": "raw",
							"raw": "{\n  \"old_password\": \"TestPass123!\",\n  \"new_password\": \"NewPassword456!\",\n  \"new_password2\": \"NewPassword456!\"\n}"
						}
					}
				}
			]
		},
		{
			"name": "3. Admin Endpoints",
			"item": [
				{
					"name": "3.1 List All Users",
					"request": {
						"method": "GET",
						"header": [{"key": "Authorization", "value": "Bearer {{admin_access_token}}"}],
						"url": {
							"raw": "{{base_url}}/api/auth/admin/users/",
							"host": ["{{base_url}}"],
							"path": ["api", "auth", "admin", "users", ""]
						}
					}
				},
				{
					"name": "3.2 Filter Users by Role",
					"request": {
						"method": "GET",
						"header": [{"key": "Authorization", "value": "Bearer {{admin_access_token}}"}],
						"url": {
							"raw": "{{base_url}}/api/auth/admin/users/?role=USER",
							"host": ["{{base_url}}"],
							"path": ["api", "auth", "admin", "users", ""],
							"query": [{"key": "role", "value": "USER"}]
						}
					}
				},
				{
					"name": "3.3 Search Users",
					"request": {
						"method": "GET",
						"header": [{"key": "Authorization", "value": "Bearer {{admin_access_token}}"}],
						"url": {
							"raw": "{{base_url}}/api/auth/admin/users/?search=test",
							"host": ["{{base_url}}"],
							"path": ["api", "auth", "admin", "users", ""],
							"query": [{"key": "search", "value": "test"}]
						}
					}
				},
				{
					"name": "3.4 View User Detail",
					"request": {
						"method": "GET",
						"header": [{"key": "Authorization", "value": "Bearer {{admin_access_token}}"}],
						"url": {
							"raw": "{{base_url}}/api/auth/admin/users/1/",
							"host": ["{{base_url}}"],
							"path": ["api", "auth", "admin", "users", "1", ""]
						}
					}
				},
				{
					"name": "3.5 View User History",
					"request": {
						"method": "GET",
						"header": [{"key": "Authorization", "value": "Bearer {{admin_access_token}}"}],
						"url": {
							"raw": "{{base_url}}/api/auth/admin/users/1/history/",
							"host": ["{{base_url}}"],
							"path": ["api", "auth", "admin", "users", "1", "history", ""]
						}
					}
				}
			]
		},
		{
			"name": "4. Dana Darurat Calculator",
			"item": [
				{
					"name": "4.1 Create Calculation (Sufficient)",
					"request": {
						"method": "POST",
						"header": [
							{"key": "Authorization", "value": "Bearer {{user_access_token}}"},
							{"key": "Content-Type", "value": "application/json"}
						],
						"url": {
							"raw": "{{base_url}}/api/dana-darurat/",
							"host": ["{{base_url}}"],
							"path": ["api", "dana-darurat", ""]
						},
						"body": {
							"mode": "raw",
							"raw": "{\n  \"monthly_expense\": 5000000,\n  \"months_to_save\": 12,\n  \"current_emergency_fund\": 50000000,\n  \"monthly_invest\": 5000000,\n  \"expected_return_pct\": 8.0\n}"
						}
					}
				},
				{
					"name": "4.2 Create Calculation (Insufficient)",
					"request": {
						"method": "POST",
						"header": [
							{"key": "Authorization", "value": "Bearer {{user_access_token}}"},
							{"key": "Content-Type", "value": "application/json"}
						],
						"url": {
							"raw": "{{base_url}}/api/dana-darurat/",
							"host": ["{{base_url}}"],
							"path": ["api", "dana-darurat", ""]
						},
						"body": {
							"mode": "raw",
							"raw": "{\n  \"monthly_expense\": 5000000,\n  \"months_to_save\": 12,\n  \"current_emergency_fund\": 10000000,\n  \"monthly_invest\": 1000000,\n  \"expected_return_pct\": 8.0\n}"
						}
					}
				},
				{
					"name": "4.3 List All Calculations",
					"request": {
						"method": "GET",
						"header": [{"key": "Authorization", "value": "Bearer {{user_access_token}}"}],
						"url": {
							"raw": "{{base_url}}/api/dana-darurat/",
							"host": ["{{base_url}}"],
							"path": ["api", "dana-darurat", ""]
						}
					}
				}
			]
		},
		{
			"name": "5. Dana Pensiun Calculator",
			"item": [
				{
					"name": "5.1 Create Calculation (Sufficient)",
					"request": {
						"method": "POST",
						"header": [
							{"key": "Authorization", "value": "Bearer {{user_access_token}}"},
							{"key": "Content-Type", "value": "application/json"}
						],
						"url": {
							"raw": "{{base_url}}/api/dana-pensiun/",
							"host": ["{{base_url}}"],
							"path": ["api", "dana-pensiun", ""]
						},
						"body": {
							"mode": "raw",
							"raw": "{\n  \"current_age\": 30,\n  \"retire_age\": 55,\n  \"monthly_expense_now\": 5000000,\n  \"inflation_pct\": 5.0,\n  \"expected_return_pct\": 12.0,\n  \"pension_years\": 20,\n  \"monthly_invest\": 5000000\n}"
						}
					}
				},
				{
					"name": "5.2 Create Calculation (Insufficient)",
					"request": {
						"method": "POST",
						"header": [
							{"key": "Authorization", "value": "Bearer {{user_access_token}}"},
							{"key": "Content-Type", "value": "application/json"}
						],
						"url": {
							"raw": "{{base_url}}/api/dana-pensiun/",
							"host": ["{{base_url}}"],
							"path": ["api", "dana-pensiun", ""]
						},
						"body": {
							"mode": "raw",
							"raw": "{\n  \"current_age\": 30,\n  \"retire_age\": 55,\n  \"monthly_expense_now\": 8000000,\n  \"inflation_pct\": 5.0,\n  \"expected_return_pct\": 10.0,\n  \"pension_years\": 20,\n  \"monthly_invest\": 2000000\n}"
						}
					}
				},
				{
					"name": "5.3 List All Calculations",
					"request": {
						"method": "GET",
						"header": [{"key": "Authorization", "value": "Bearer {{user_access_token}}"}],
						"url": {
							"raw": "{{base_url}}/api/dana-pensiun/",
							"host": ["{{base_url}}"],
							"path": ["api", "dana-pensiun", ""]
						}
					}
				}
			]
		},
		{
			"name": "6. Emas Calculator",
			"item": [
				{
					"name": "6.1 Emas to Rupiah",
					"request": {
						"method": "POST",
						"header": [
							{"key": "Authorization", "value": "Bearer {{user_access_token}}"},
							{"key": "Content-Type", "value": "application/json"}
						],
						"url": {
							"raw": "{{base_url}}/api/emas/",
							"host": ["{{base_url}}"],
							"path": ["api", "emas", ""]
						},
						"body": {
							"mode": "raw",
							"raw": "{\n  \"mode\": \"emas_to_rupiah\",\n  \"price_choice\": \"BUY\",\n  \"grams_input\": 10,\n  \"price_per_gram\": 1050000\n}"
						}
					}
				},
				{
					"name": "6.2 Rupiah to Emas",
					"request": {
						"method": "POST",
						"header": [
							{"key": "Authorization", "value": "Bearer {{user_access_token}}"},
							{"key": "Content-Type", "value": "application/json"}
						],
						"url": {
							"raw": "{{base_url}}/api/emas/",
							"host": ["{{base_url}}"],
							"path": ["api", "emas", ""]
						},
						"body": {
							"mode": "raw",
							"raw": "{\n  \"mode\": \"rupiah_to_emas\",\n  \"price_choice\": \"SELL\",\n  \"rupiah_input\": 10000000,\n  \"price_per_gram\": 1040000\n}"
						}
					}
				},
				{
					"name": "6.3 List All Calculations",
					"request": {
						"method": "GET",
						"header": [{"key": "Authorization", "value": "Bearer {{user_access_token}}"}],
						"url": {
							"raw": "{{base_url}}/api/emas/",
							"host": ["{{base_url}}"],
							"path": ["api", "emas", ""]
						}
					}
				}
			]
		},
		{
			"name": "7. Unified History",
			"item": [
				{
					"name": "7.1 Get All History",
					"request": {
						"method": "GET",
						"header": [{"key": "Authorization", "value": "Bearer {{user_access_token}}"}],
						"url": {
							"raw": "{{base_url}}/api/history/",
							"host": ["{{base_url}}"],
							"path": ["api", "history", ""]
						}
					}
				},
				{
					"name": "7.2 Filter by Emergency Fund",
					"request": {
						"method": "GET",
						"header": [{"key": "Authorization", "value": "Bearer {{user_access_token}}"}],
						"url": {
							"raw": "{{base_url}}/api/history/?calculator_type=emergency_fund",
							"host": ["{{base_url}}"],
							"path": ["api", "history", ""],
							"query": [{"key": "calculator_type", "value": "emergency_fund"}]
						}
					}
				},
				{
					"name": "7.3 Filter by Pension",
					"request": {
						"method": "GET",
						"header": [{"key": "Authorization", "value": "Bearer {{user_access_token}}"}],
						"url": {
							"raw": "{{base_url}}/api/history/?calculator_type=pension",
							"host": ["{{base_url}}"],
							"path": ["api", "history", ""],
							"query": [{"key": "calculator_type", "value": "pension"}]
						}
					}
				},
				{
					"name": "7.4 Filter by Gold",
					"request": {
						"method": "GET",
						"header": [{"key": "Authorization", "value": "Bearer {{user_access_token}}"}],
						"url": {
							"raw": "{{base_url}}/api/history/?calculator_type=gold",
							"host": ["{{base_url}}"],
							"path": ["api", "history", ""],
							"query": [{"key": "calculator_type", "value": "gold"}]
						}
					}
				},
				{
					"name": "7.5 Sort by Oldest",
					"request": {
						"method": "GET",
						"header": [{"key": "Authorization", "value": "Bearer {{user_access_token}}"}],
						"url": {
							"raw": "{{base_url}}/api/history/?sort=oldest",
							"host": ["{{base_url}}"],
							"path": ["api", "history", ""],
							"query": [{"key": "sort", "value": "oldest"}]
						}
					}
				}
			]
		}
	],
	"variable": [
		{
			"key": "base_url",
			"value": "http://localhost:8000",
			"type": "string"
		}
	]
}
